*************************
MATLAB wrapper of REFPROP
*************************

Updated wrapper by Ian Bell, NIST, 2016

==============
Pre-requisites
==============

* MATLAB
* A licensed version of NIST REFPROP

======================
Problems with wrapper?
======================

* File an issue at https://github.com/usnistgov/REFPROP-wrappers/issues

=======================
Instructions on windows
=======================

1. Install REFPROP as normal.  (default on 64-bit windows is ``c:/Program Files (x86)/REFPROP``, or ``c:/Program Files/REFPROP`` on 32-bit windows)
2. If you have a 64-bit MATLAB version, make sure you have a ``REFPPRP64.dll`` file in your REFPROP installation directory 
3. Place the ``REFPROP.h`` that you can obtain from `REFPROP.h <https://raw.githubusercontent.com/usnistgov/REFPROP-wrappers/master/wrappers/MATLAB/REFPROP.h>`_ in the REFPROP installation directory
4. Place `refpropm.m <https://raw.githubusercontent.com/usnistgov/REFPROP-wrappers/master/wrappers/MATLAB/refpropm.m>`_ somewhere on your computer.  Make sure it is on the `MATLAB path <https://www.mathworks.com/help/matlab/ref/path.html>`_
5. Test your refpropm file with something like (the normal boiling point temperature of water at one atmosphere, or 101.325 kPa)::

    >> refpropm('T','P',101.325,'Q',0,'WATER')

    ans =

      373.1243

Potential problems
------------------

* If you have not installed REFPROP in the standard location, modify the block of code that reads like::

    if strcmp(computer, 'PCWIN64')
        BasePath = 'C:\Program Files (x86)\REFPROP\';
        dllName = 'REFPRP64.dll';
    else
        if strcmp(computer, 'PCWIN32')
            BasePath = 'C:\Program Files\REFPROP\';
            dllName = 'REFPROP.dll';
        else
            error(strcat('Architecture[',computer,'] is not understood'));
        end
    end

  with the appropriate ``BasePath`` for your system

* If you don't have a valid compiler for MATLAB, you will need to use a prototype file. To create it, run the following command in MATLAB on a computer with a valid compiler::

    >> loadlibrary('REFPRP64.dll', 'REFPROP.h', 'mfilename', 'rp_proto64.m')

=========================
Instructions on OSX/linux
=========================
 
1. Make a folder called ``refprop`` in your home directory (case sensitive!).  For me I generated the folder ``/home/ihb/refprop``
2. Into that folder place the mixtures and fluids directories from REFPROP, making each directory all lowercase (``fluids`` and ``mixtures``)
3. Obtain a build of REFPROP for OSX, either by emailing ian.bell@nist.gov with your REFPROP license information, or by compiling it yourself (see https://github.com/usnistgov/REFPROP-cmake)
4. Put your ``libREFPROP64.so`` in the refprop directory (but rename it to librefprop.so)
5. Put the header ``REFPROP.h`` that is auto-generated by the REFPROP-cmake build (or provided with shared library) in the refprop directory

So in the refprop folder you should have a structure like::

    ├── fluids
    │   ├── 1BUTENE.FLD
    │   ├── ACETONE.FLD
    │   …
    ├── librefprop.so
    ├── mixtures
    │   ├── AIR.MIX
    │   ├── AMARILLO.MIX
    │  …
    └── REFPROP.h

6. Test your refpropm file with something like (the normal boiling point temperature of water at one atmosphere, or 101.325 kPa)::

    >> refpropm('T','P',101.325,'Q',0,'WATER')

    ans =

      373.1243
